<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{manager/layout :: header}"></head>
  <body>
    <div th:replace="~{manager/layout :: sidebar}"></div>

    <div class="content">
      <div class="container-fluid">
        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <div>
            <h2><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h2>
            <p class="text-muted mb-0">Xin chào, <strong th:text="${user.fullName}">Manager</strong></p>
          </div>
        </div>

        <!-- Class Info Alert -->
        <div th:if="${studentClass == null}" class="alert alert-warning">
          <i class="fas fa-exclamation-triangle me-2"></i>
          Bạn chưa được gán quản lý lớp nào. Vui lòng liên hệ Admin.
        </div>

        <!-- Class Info Card -->
        <div th:if="${studentClass != null}" class="row">
          <div class="col-md-6 mb-4">
            <div class="card border-primary">
              <div class="card-header bg-primary text-white">
                <i class="fas fa-chalkboard-teacher me-2"></i>Thông tin lớp quản lý
              </div>
              <div class="card-body">
                <h4 th:text="${studentClass.name}">Lớp CNTT K45</h4>
                <table class="table table-borderless mb-0">
                  <tr>
                    <th width="40%"><i class="fas fa-code me-2 text-muted"></i>Mã lớp:</th>
                    <td><span class="badge bg-primary" th:text="${studentClass.code}">CNTT-K45A</span></td>
                  </tr>
                  <tr>
                    <th><i class="fas fa-key me-2 text-muted"></i>Mã tham gia:</th>
                    <td><span class="badge bg-success fs-6" th:text="${studentClass.joinCode}">ABC123</span></td>
                  </tr>
                  <tr>
                    <th><i class="fas fa-users me-2 text-muted"></i>Số thành viên:</th>
                    <td><strong th:text="${memberCount}">0</strong> sinh viên</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="col-md-6 mb-4">
            <div class="row">
              <div class="col-6 mb-3">
                <a th:href="@{/manager/join-requests}" class="card bg-info text-white text-decoration-none">
                  <div class="card-body text-center">
                    <h3 class="mb-0" th:text="${pendingJoinRequests}">0</h3>
                    <small>Yêu cầu tham gia</small>
                  </div>
                </a>
              </div>
              <div class="col-6 mb-3">
                <a th:href="@{/manager/point-requests}" class="card bg-warning text-decoration-none">
                  <div class="card-body text-center">
                    <h3 class="mb-0" th:text="${pendingPointRequests}">0</h3>
                    <small>Yêu cầu điểm</small>
                  </div>
                </a>
              </div>
              <div class="col-6">
                <div class="card bg-success text-white">
                  <div class="card-body text-center">
                    <h3 class="mb-0">0</h3>
                    <small>Hoạt động đang diễn ra</small>
                  </div>
                </div>
              </div>
              <div class="col-6">
                <div class="card bg-secondary text-white">
                  <div class="card-body text-center">
                    <h3 class="mb-0">0</h3>
                    <small>Minh chứng chờ duyệt</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div th:if="${studentClass != null}" class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <i class="fas fa-bolt me-2"></i>Thao tác nhanh
              </div>
              <div class="card-body">
                <a th:href="@{/manager/members}" class="btn btn-outline-primary me-2">
                  <i class="fas fa-users me-1"></i>Xem thành viên
                </a>
                <a th:href="@{/manager/join-requests}" class="btn btn-outline-info me-2">
                  <i class="fas fa-user-plus me-1"></i>Duyệt yêu cầu tham gia
                </a>
                <a th:href="@{/manager/point-requests}" class="btn btn-outline-warning me-2">
                  <i class="fas fa-star me-1"></i>Duyệt yêu cầu điểm
                </a>
                <a th:href="@{/manager/reports}" class="btn btn-outline-success">
                  <i class="fas fa-file-excel me-1"></i>Xuất báo cáo
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div th:replace="~{manager/layout :: scripts}"></div>
  </body>
</html>
